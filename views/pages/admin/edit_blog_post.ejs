<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Blog Post</title>
</head>

<body>
    <h1>Edit Blog Post</h1>
    <form action="/admin/edit-blog-post/<%= blogPost._id %>" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">

        <label for="title">Title:</label>
        <input type="text" name="title" id="title" value="<%= blogPost.title %>" required><br>

        <label for="category">Category:</label>
        <select name="category" id="category" required>
            <% categories.forEach(category=> { %>
                <option <%= blogPost.category.toString() === category._id.toString() ? 'selected' : '' %> ><%= category.name %> value="<%= category._id %>">
                </option> 
            <% }) %>
        </select><br>

        <label for="templateImage">Template Image:</label>
        <input type="file" name="templateImage" id="templateImage"><br>
        <% if (blogPost.templateImage) { %>
            <img src="<%= blogPost.templateImage %>" alt="Template Image" width="200"><br>
            <% } %>

                <label for="content">Content:</label>
                <textarea name="content" id="content" required><%= JSON.stringify(blogPost.content) %></textarea><br>

                <button type="submit">Update</button>
    </form>
</body>

</html>